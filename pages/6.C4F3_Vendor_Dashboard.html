<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vendor Dashboard â€“ Coffee Marketplace</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body { background: linear-gradient(135deg, #6F4E37, #D2B48C); }
  .glass { background: rgba(255,255,255,0.15); backdrop-filter: blur(20px); border:1px solid rgba(255,255,255,0.25); border-radius:1rem; }
  .soft-shadow { box-shadow: 0 8px 32px rgba(0,0,0,0.25); }
  .hover-scale:hover { transform: scale(1.03); transition: all 0.3s ease-in-out; }
  .btn-glass { position: relative; overflow: hidden; border:1px solid rgba(255,255,255,0.25); background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); color:white; font-weight:600; border-radius:.75rem; }
  .btn-glass::after { content: ''; position: absolute; top:-50%; left:-50%; width:200%; height:200%; background: linear-gradient(45deg, #FFD700, #FF8C00, #FF4500, #FFD700); opacity:0.4; filter: blur(15px); transform: rotate(45deg); transition: all 0.5s ease-in-out; }
  .btn-glass:hover::after { opacity:0.8; filter: blur(25px); transform: rotate(45deg) scale(1.05); }
  .btn-glass span { position: relative; z-index:1; }
  .modal-bg { background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); }
  canvas { border-radius:1rem; background: rgba(255,255,255,0.1); }
  .carousel { display:flex; overflow-x:auto; scroll-behavior: smooth; padding-bottom:10px; }
  .carousel::-webkit-scrollbar { display: none; }
</style>
</head>
<body class="min-h-screen font-sans p-0">

<div class="flex min-h-screen">
  <!-- Sidebar -->
  <aside class="w-64 glass soft-shadow flex-shrink-0 border-r border-white/20 p-6 flex flex-col space-y-4">
    <a href="#" class="block btn-glass text-center py-3 active" id="overviewBtn"><span>Overview</span></a>
    <a href="#" class="block btn-glass text-center py-3" id="myAdsBtn"><span>My Ads</span></a>
    <a href="#" class="block btn-glass text-center py-3" id="partnershipsBtn"><span>Partnerships</span></a>
    <a href="#" class="block btn-glass text-center py-3" id="messagesBtn"><span>Messages</span></a>
    <a href="#" class="block btn-glass text-center py-3" id="profileBtn"><span>Profile</span></a>
    <div class="flex-grow"></div>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 p-6 lg:p-10 space-y-8">
    <div class="flex items-center justify-between">
      <h1 class="text-3xl font-bold text-white">Dashboard</h1>
      <div class="flex space-x-2 items-center">
        <input type="date" id="startDate" class="px-4 py-2 glass soft-shadow text-white/80 rounded-md">
        <input type="date" id="endDate" class="px-4 py-2 glass soft-shadow text-white/80 rounded-md">
        <button class="btn-glass px-4 py-2" onclick="updateCharts()"><span>Filter</span></button>
      </div>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
      <div class="glass soft-shadow p-6 flex flex-col items-center justify-center font-semibold text-white text-lg hover-scale">
        <span>Views</span>
        <canvas id="viewsChart" class="mt-3 w-full h-24"></canvas>
      </div>
      <div class="glass soft-shadow p-6 flex flex-col items-center justify-center font-semibold text-white text-lg hover-scale">
        <span>Clicks</span>
        <canvas id="clicksChart" class="mt-3 w-full h-24"></canvas>
      </div>
      <div class="glass soft-shadow p-6 flex flex-col items-center justify-center font-semibold text-white text-lg hover-scale">
        <span>Requests</span>
        <canvas id="requestsChart" class="mt-3 w-full h-24"></canvas>
      </div>
      <div class="glass soft-shadow p-6 flex flex-col items-center justify-center font-semibold text-white text-lg hover-scale">
        <span>Approvals</span>
        <canvas id="approvalsChart" class="mt-3 w-full h-24"></canvas>
      </div>
    </div>

    <!-- Recent Ads and Requests -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <div class="glass soft-shadow p-6 space-y-4">
        <h2 class="text-xl font-bold text-white">Recent Ads</h2>
        <div class="space-y-3">
          <div class="flex items-center justify-between p-4 bg-white/10 rounded-lg">
            <span class="font-medium text-white">Ad A</span>
            <span class="px-3 py-1 text-xs font-semibold text-green-700 bg-green-100 rounded-full">Active</span>
          </div>
          <div class="flex items-center justify-between p-4 bg-white/10 rounded-lg">
            <span class="font-medium text-white">Ad B</span>
            <span class="px-3 py-1 text-xs font-semibold text-yellow-700 bg-yellow-100 rounded-full">Pending</span>
          </div>
        </div>
      </div>
      <div class="glass soft-shadow p-6 space-y-4">
        <h2 class="text-xl font-bold text-white">Recent Requests</h2>
        <div class="space-y-3">
          <div class="flex items-center justify-between p-4 bg-white/10 rounded-lg">
            <span class="font-medium text-white">Cafe One</span>
            <button class="btn-glass px-4 py-2" onclick="openModal('Cafe One')"><span>View</span></button>
          </div>
          <div class="flex items-center justify-between p-4 bg-white/10 rounded-lg">
            <span class="font-medium text-white">Cafe Two</span>
            <button class="btn-glass px-4 py-2" onclick="openModal('Cafe Two')"><span>View</span></button>
          </div>
        </div>
      </div>
    </div>

    <!-- Related Products Carousel -->
    <div class="space-y-4">
      <h2 class="text-2xl font-bold text-white">Related Products</h2>

      <!-- Filters -->
      <div class="flex flex-wrap gap-3 mb-4">
        <select id="categoryFilter" class="glass px-4 py-2 text-white rounded-md">
          <option value="">All Categories</option>
          <option value="Coffee Beans">Coffee Beans</option>
          <option value="Equipment">Equipment</option>
          <option value="Merch">Merch</option>
        </select>
        <input type="range" min="0" max="200" step="10" id="priceFilter" class="glass w-48" onchange="filterProducts()">
        <span class="text-white ml-2" id="priceLabel">$0 - $200</span>
      </div>

      <!-- Carousel -->
      <div class="carousel" id="relatedCarousel">
        <!-- Product template -->
        <div class="glass soft-shadow p-5 rounded-2xl hover-scale min-w-[250px] m-2" data-category="Coffee Beans" data-price="50">
          <div class="w-full h-40 mb-4 bg-white/20 rounded-xl flex items-center justify-center text-white/70">Image</div>
          <h3 class="text-white font-semibold">Espresso Beans</h3>
          <p class="text-[#D2691E] font-bold">$50</p>
        </div>
        <div class="glass soft-shadow p-5 rounded-2xl hover-scale min-w-[250px] m-2" data-category="Equipment" data-price="150">
          <div class="w-full h-40 mb-4 bg-white/20 rounded-xl flex items-center justify-center text-white/70">Image</div>
          <h3 class="text-white font-semibold">Coffee Grinder</h3>
          <p class="text-[#D2691E] font-bold">$150</p>
        </div>
        <div class="glass soft-shadow p-5 rounded-2xl hover-scale min-w-[250px] m-2" data-category="Merch" data-price="25">
          <div class="w-full h-40 mb-4 bg-white/20 rounded-xl flex items-center justify-center text-white/70">Image</div>
          <h3 class="text-white font-semibold">Coffee Mug</h3>
          <p class="text-[#D2691E] font-bold">$25</p>
        </div>
        <div class="glass soft-shadow p-5 rounded-2xl hover-scale min-w-[250px] m-2" data-category="Coffee Beans" data-price="70">
          <div class="w-full h-40 mb-4 bg-white/20 rounded-xl flex items-center justify-center text-white/70">Image</div>
          <h3 class="text-white font-semibold">Latte Blend</h3>
          <p class="text-[#D2691E] font-bold">$70</p>
        </div>
      </div>
    </div>

  </main>
</div>

<!-- Modal -->
<div id="requestModal" class="hidden fixed inset-0 flex items-center justify-center modal-bg z-50">
  <div class="glass soft-shadow p-6 rounded-3xl w-11/12 max-w-md relative space-y-4">
    <span class="absolute top-4 right-6 text-white text-2xl cursor-pointer" onclick="closeModal()">&times;</span>
    <h2 class="text-xl font-bold text-white" id="modalTitle">Request Details</h2>
    <p class="text-white/80" id="modalContent">Details about the request will appear here.</p>
    <div class="flex justify-end space-x-3">
      <button class="btn-glass px-6 py-2" onclick="closeModal()"><span>Close</span></button>
    </div>
  </div>
</div>

<script>
fetch('/cafes_platform/backend/vendor_dashboard.php')
  .then(res => res.json())
  .then(data => {
    console.log(data);

    // stats
    // data.stats.totalAds
    // data.stats.activeAds

    // lists
    // data.recentAds
    // data.recentRequests

    // charts
    // data.charts.views
  });
</script>
  
  function openModal(name){
    document.getElementById('modalTitle').textContent = name + ' Request';
    document.getElementById('modalContent').textContent = 'Here are the details for ' + name + '.';
    document.getElementById('requestModal').classList.remove('hidden');
    document.getElementById('requestModal').classList.add('flex');
  }
  function closeModal(){
    document.getElementById('requestModal').classList.add('hidden');
    document.getElementById('requestModal').classList.remove('flex');
  }

  // Charts
  let charts = {};
  const createChart = (ctx,label,color)=>{
    return new Chart(ctx,{
      type:'line',
      data:{
        labels:['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],
        datasets:[{label,label,data:Array.from({length:7},()=>Math.floor(Math.random()*100)),borderColor:color,backgroundColor:color+'33',fill:true,tension:0.4}]
      },
      options:{
        responsive:true,
        plugins:{legend:{display:false}},
        scales:{x:{ticks:{color:'white'},grid:{color:'rgba(255,255,255,0.2)'}},y:{ticks:{color:'white'},grid:{color:'rgba(255,255,255,0.2)'}}}
      }
    });
  };

  charts.views=createChart(document.getElementById('viewsChart'),'Views','#FFD700');
  charts.clicks=createChart(document.getElementById('clicksChart'),'Clicks','#FF8C00');
  charts.requests=createChart(document.getElementById('requestsChart'),'Requests','#FF4500');
  charts.approvals=createChart(document.getElementById('approvalsChart'),'Approvals','#ADFF2F');

  function updateCharts(){
    const start=document.getElementById('startDate').value;
    const end=document.getElementById('endDate').value;
    if(!start||!end)return alert("Select start & end dates");
    Object.values(charts).forEach(c=>{c.data.datasets[0].data=Array.from({length:7},()=>Math.floor(Math.random()*100)); c.update();});
  }

  // Related Products Filter
  function filterProducts(){
    const cat=document.getElementById('categoryFilter').value;
    const price=document.getElementById('priceFilter').value;
    document.getElementById('priceLabel').textContent=`$0 - $${price}`;
    document.querySelectorAll('#relatedCarousel > div').forEach(p=>{
      const pCat=p.dataset.category, pPrice=parseInt(p.dataset.price);
      if((!cat||cat===pCat)&&(pPrice<=price)){ p.style.display='block'; }else{ p.style.display='none'; }
    });
  }
</script>
</body>
</html>
